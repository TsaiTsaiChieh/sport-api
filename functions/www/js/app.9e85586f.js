(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,a){e.exports=a("2f39")},"2f39":function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"someGetter",(function(){return k}));var r={};a.r(r),a.d(r,"setProfile",(function(){return x})),a.d(r,"login",(function(){return D})),a.d(r,"logout",(function(){return T}));var s={};a.r(s),a.d(s,"setProfile",(function(){return O})),a.d(s,"login",(function(){return Y})),a.d(s,"logout",(function(){return P}));var i={};a.r(i),a.d(i,"someGetter",(function(){return A}));var o={};a.r(o),a.d(o,"fetchMessages",(function(){return E})),a.d(o,"addMessage",(function(){return V})),a.d(o,"checkNewMessage",(function(){return F})),a.d(o,"clearMessages",(function(){return B})),a.d(o,"createReply",(function(){return q})),a.d(o,"clearReply",(function(){return G})),a.d(o,"setReplyIndex",(function(){return J})),a.d(o,"deleteMessage",(function(){return W})),a.d(o,"restoreDeleteMessage",(function(){return K})),a.d(o,"errorRemoveMessage",(function(){return Q})),a.d(o,"setMessageId",(function(){return X})),a.d(o,"setFirstMessageTime",(function(){return Z}));var c={};a.r(c),a.d(c,"fetchMessages",(function(){return oe})),a.d(c,"pushMessages",(function(){return ce})),a.d(c,"addMessage",(function(){return ue})),a.d(c,"checkNewMessage",(function(){return le})),a.d(c,"clearMessages",(function(){return me})),a.d(c,"createReply",(function(){return pe})),a.d(c,"clearReply",(function(){return fe})),a.d(c,"setReplyIndex",(function(){return de})),a.d(c,"deleteMessage",(function(){return ge})),a.d(c,"setFirstMessageTime",(function(){return he}));var u=a("967e"),l=a.n(u),m=(a("a481"),a("96cf"),a("05bc"),a("7d6e"),a("e54f"),a("4439"),a("4605"),a("f580"),a("5b2b"),a("2967"),a("7e67"),a("d770"),a("dd82"),a("922c"),a("c32e"),a("a151"),a("8bc7"),a("d67f"),a("880e"),a("1c10"),a("9482"),a("e797"),a("4848"),a("e9fd"),a("195c"),a("64e9"),a("33c5"),a("4f62"),a("0dbc"),a("4953"),a("81db"),a("2e52"),a("2248"),a("e592"),a("70ca"),a("2318"),a("24bd"),a("8f27"),a("3064"),a("c9a2"),a("8767"),a("4a8e"),a("b828"),a("3c1c"),a("21cb"),a("c00e"),a("e4a8"),a("e4d3"),a("f4d9"),a("b794"),a("af24"),a("7c9c"),a("7bb2"),a("64f7"),a("c382"),a("f5d1"),a("3cec"),a("c00ee"),a("d450"),a("ca07"),a("14e3"),a("1dba"),a("674a"),a("de26"),a("6721"),a("25e9"),a("fc83"),a("98e5"),a("605a"),a("ba60"),a("df07"),a("7903"),a("e046"),a("58af"),a("7713"),a("0571"),a("3e27"),a("6837"),a("3fc9"),a("0693"),a("bf41"),a("985d"),a("a5c0"),a("31cd"),a("2b0e")),p=a("b05d"),f=a("436b"),d=a("515f");m["a"].use(p["a"],{config:{},plugins:{Dialog:f["a"],Cookies:d["a"]}});var g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"q-app"}},[a("router-view")],1)},h=[],v={name:"App"},y=v,b=a("2877"),I=Object(b["a"])(y,g,h,!1,null,null,null),w=I.exports,N=a("2f62"),M={isLoggedIn:!1,profile:{uid:null,role:null,name:null,nickname:null,phoneNumber:null,mail:null,birthday:null,inviteCode:null,code:null,signature:null,killerLevel:null,killerType:null,avatar:null,point:null,defaultTitle:null,titles:null}};function k(){}a("7f7f");function x(e,t){var a=t.uid,n=t.email,r=t.name,s=t.phoneNumber,i=t.displayName,o=t.photoURL,c=t.birthday,u=t.signature,l=t.point,m=t.referrer,p=t.defaultTitle,f=t.titles,d=t.status,g="";1===d&&(g="user"),9===d&&(g="admin"),2===d&&(g="killer"),e.isLoggedIn=!0,e.profile={uid:a,role:g,name:r,nickname:i,phoneNumber:s,mail:n,birthday:c,inviteCode:m,code:a,signature:u,killerLevel:p.rank,killerType:p.league,avatar:o,point:l,defaultTitle:p,titles:f}}function D(e){e.isLoggedIn=!0}function T(e){e.isLoggedIn=!1,e.profile={uid:null,role:"user",name:null,nickname:null,phoneNumber:null,mail:null,birthday:null,inviteCode:null,code:null,signature:null,killerLevel:null,killerType:null,avatar:null,point:null,defaultTitle:null,titles:null}}function O(e,t){e.commit("setProfile",t)}function Y(e){e.commit("login")}function P(e){e.commit("logout")}var j={namespaced:!0,getters:n,mutations:r,actions:s,state:M},R={initReply:{index:null,messageId:"",avatar:"",name:"",text:"",imgUrl:"",videoUrl:""},public:{messages:[],messageSize:50,firstMessageTime:null,reply:{index:null,messageId:"",avatar:"",name:"",text:"",imgUrl:"",videoUrl:""}}};function A(){}a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d");var H=a("c47a"),U=a.n(H),L=a("4db1"),S=a.n(L),_=a("bd4c");function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){U()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e,t){var a=t.chatName,n=t.messages,r=S()(e[a].messages),s=z({messages:n});0!==r.length&&_["b"].formatDate(r[1].timestamp,"YYYY-MM-DD")===_["b"].formatDate(s[s.length-1].timestamp,"YYYY-MM-DD")&&r.splice(0,1),e[a].messages=[].concat(S()(s),S()(r))}function V(e,t){var a=t.chatName,n=t.message,r=e[a].messages;if(0!==r.length){var s=r[r.length-1].timestamp;_["b"].formatDate(s,"YYYY-MM-DD")!==_["b"].formatDate(n.timestamp,"YYYY-MM-DD")&&e[a].messages.push({isTime:!0,timestamp:n.timestamp})}e[a].messages.push(n)}function F(e,t){for(var a=t.chatName,n=t.newMessage,r=e[a].messages,s=!1,i=r.length-1;i>=0;i-=1){if(r[i].tempHash===n.tempHash&&!r[i].messageId)return void(e[a].messages[i].messageId=n.messageId);if(r[i].messageId===n.messageId){s=!0;break}}s||(_["b"].formatDate(r[r.length-1].timestamp,"YYYY-MM-DD")!==_["b"].formatDate(n.timestamp,"YYYY-MM-DD")&&e[a].messages.push({isTime:!0,timestamp:n.timestamp}),e[a].messages.push(n))}function z(e){for(var t=e.messages,a=[],n=0,r=t.length;n<r;n+=1){var s=t[n];0===n?a.push({isTime:!0,timestamp:s.timestamp}):_["b"].formatDate(s.timestamp,"YYYY-MM-DD")!==_["b"].formatDate(t[n-1].timestamp,"YYYY-MM-DD")&&a.push({isTime:!0,timestamp:s.timestamp}),a.push(s)}return a}function B(e,t){var a=t.chatName;e[a].messages=[]}function q(e,t){var a=t.chatName,n=t.reply;for(var r in n)n.hasOwnProperty(r)&&(e[a].reply[r]=n[r])}function G(e,t){var a=t.chatName;e[a].reply=$({},e.initReply)}function J(e,t){var a=t.chatName,n=t.index;e[a].reply.index=n}function W(e,t){for(var a=t.chatName,n=t.messageId,r=t.deleteAction,s=e[a].messages,i=0,o=s.length;i<o;i+=1)if(s[i].messageId===n){s[i].deleteAction=r,e[a].messages=S()(s);break}}function K(e,t){var a=t.chatName,n=t.messageId;t.deleteAction;alert("操作失敗");for(var r=e[a].messages,s=0,i=r.length;s<i;s+=1)if(r[s].messageId===n){delete r[s].deleteAction,e[a].messages=S()(r);break}}function Q(e,t){for(var a=t.chatName,n=t.tempHash,r=e[a].messages,s=r.length-1;s>=0;s-=1)if(r[s].tempHash===n){e[a].messages.splice(s,1);break}}function X(e,t){for(var a=t.chatName,n=t.tempHash,r=t.messageId,s=e[a].messages,i=s.length-1;i>=0;i-=1)if(s[i].tempHash===n){e[a].messages[i].messageId=r;break}}function Z(e,t){var a=t.chatName,n=t.firstMessageTime;e[a].firstMessageTime=n}var ee=a("bc3a"),te=a.n(ee),ae="https://chat-api.doinfo.cc/",ne=te.a.create({baseURL:ae});m["a"].prototype.$axios=te.a,m["a"].prototype.$axiosInstance=ne;var re=function(e){var t=e.app;t.axios=te.a,t.axiosInstance=ne};function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(a,!0).forEach((function(t){U()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function oe(e,t){var a=t.chatName;ne.get("/messages_tsai",{params:{limit:50,offset:0,channelId:"public"}}).then((function(t){var n=t.data,r=n.map((function(t){var a=t.message,n=a.messageId,r=a.message,s=a.createTime,i=t.user,o=i.uid,c=i.displayName,u=i.avatar,l={index:null,messageId:"a",avatar:"/statics/app-logo-128x128.png",name:"田轎仔炫雅 a",text:"我是來自台中的教主甜心～",imgUrl:"",videoUrl:""};return{messageId:n,isSent:o===e.rootState.user.uid,name:c,role:"user",killerLevel:1,killerType:"NBA",avatar:u,signature:"我是家有一甲地的田轎子",point:2500,text:r,timestamp:new Date(1e3*s.seconds),reply:l}}));e.commit("fetchMessages",{chatName:a,messages:r})}))}function ce(e,t){var a=t.chatName,n=t.messages,r=n.map((function(t){var a=t.createTime,n=t.message,r=t.reply,s=void 0===r?null:r,i=t.user,o="";1===i.status&&(o="user"),9===i.status&&(o="admin"),2===i.status&&(o="killer"),i.status||(o="user");var c=null;return s&&(c={messageId:s.messageId,avatar:s.user.avatar,name:s.user.displayName,text:"text"===s.type?s.message:"",imgUrl:/^image/.test(s.type)?s.message:"",videoUrl:/^video/.test(s.type)?s.message:""}),{messageId:n.messageId,isSent:i.uid===e.rootState.user.uid,isImg:/^image/.test(n.type),isVideo:/^video/.test(n.type),file:/^image/.test(n.type)||/^video/.test(n.type)?n.message:"",name:i.displayName,role:o,killerLevel:i.defaultTitle.rank,killerType:i.defaultTitle.league,avatar:i.avatar,signature:i.signature,point:i.point,text:n.message,timestamp:1e3*a._seconds,reply:c}}));e.commit("fetchMessages",{chatName:a,messages:r})}function ue(e,t){var a=t.chatName,n=t.message,r=e.state[a].reply.messageId,s=ie({},n);s.reply=r?ie({},e.state[a].reply):null,e.commit("addMessage",{chatName:a,message:s});var i={};n.isImg?i={message:{channelId:a,message:n.imgUrl,type:n.fileType,tempHash:n.tempHash}}:n.isVideo?i={message:{channelId:a,message:n.videoUrl,type:n.fileType,tempHash:n.tempHash}}:(i={message:{channelId:a,message:n.text,type:"text",tempHash:n.tempHash}},r&&(i.reply={messageId:e.state[a].reply.messageId})),ne.post("/messages",i).then((function(t){var n=t.data.message;e.commit("setMessageId",{chatName:a,tempHash:s.tempHash,messageId:n.messageId})})).catch((function(){alert("傳送訊息失敗"),e.commit("errorRemoveMessage",{chatName:a,tempHash:s.tempHash})}))}function le(e,t){var a=t.chatName,n=t.newMessage,r=n.createTime,s=n.message,i=n.reply,o=void 0===i?null:i,c=n.user,u="";1===c.status&&(u="user"),9===c.status&&(u="admin"),2===c.status&&(u="killer"),c.status||(u="user");var l=null;o&&(l={messageId:o.messageId,avatar:o.user.avatar,name:o.user.displayName,text:"text"===o.type?o.message:"",imgUrl:/^image/.test(o.type)?o.message:"",videoUrl:/^video/.test(o.type)?o.message:""});var m={tempHash:s.tempHash,messageId:s.messageId,isSent:c.uid===e.rootState.user.uid,isImg:/^image/.test(s.type),isVideo:/^video/.test(s.type),file:/^image/.test(s.type)||/^video/.test(s.type)?s.message:"",name:c.displayName,role:u,killerLevel:c.defaultTitle.rank,killerType:c.defaultTitle.league,avatar:c.avatar,signature:c.signature,point:c.point,text:s.message,timestamp:1e3*r._seconds,reply:l};e.commit("checkNewMessage",{chatName:a,newMessage:m})}function me(e,t){var a=t.chatName;e.commit("clearMessages",{chatName:a})}function pe(e,t){var a=t.chatName,n=t.reply;e.commit("createReply",{chatName:a,reply:n})}function fe(e,t){var a=t.chatName;e.commit("clearReply",{chatName:a})}function de(e,t){var a=t.chatName,n=t.index;e.commit("setReplyIndex",{chatName:a,index:n})}function ge(e,t){var a=t.chatName,n=t.messageId,r=t.deleteAction;n&&(e.commit("deleteMessage",{chatName:a,messageId:n,deleteAction:r}),ne.delete("/messages/".concat(n),{data:{deleteAction:r,channelId:a}}).then((function(e){var t=e.data;console.log(t)})).catch((function(){e.commit("restoreDeleteMessage",{chatName:a,messageId:n,deleteAction:r})})))}function he(e,t){e.commit("setFirstMessageTime",t)}var ve={namespaced:!0,getters:i,mutations:o,actions:c,state:R};m["a"].use(N["a"]);var ye=function(){var e=new N["a"].Store({modules:{user:j,chat:ve},strict:!1});return e},be=a("8c4f"),Ie=[{path:"/",component:function(){return Promise.all([a.e("4308c3de"),a.e("7c4b3be2")]).then(a.bind(null,"f241"))},children:[{path:"",component:function(){return Promise.all([a.e("4308c3de"),a.e("05d3feac")]).then(a.bind(null,"8b24"))}},{path:"profile",component:function(){return Promise.all([a.e("4308c3de"),a.e("7ac6929a")]).then(a.bind(null,"2ff9"))}}]}];var we=Ie;m["a"].use(be["a"]);var Ne=function(){var e=new be["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:we,mode:"history",base:"/"});return e},Me=function(e){var t="function"===typeof ye?ye({Vue:m["a"],ssrContext:e}):ye,a="function"===typeof Ne?Ne({Vue:m["a"],ssrContext:e,store:t}):Ne;t.$router=a;var n={router:a,store:t,render:function(e){return e(w)}};return p["a"].ssrUpdate({app:n,ssr:e}),{app:n,store:t,router:a}},ke=a("a925"),xe={failed:"Action failed",success:"Action was successful"},De={"en-us":xe};m["a"].use(ke["a"]);var Te,Oe=new ke["a"]({locale:"en-us",fallbackLocale:"en-us",messages:De}),Ye=function(e){var t=e.app;t.i18n=Oe},Pe=function(e){var t=e.router,a=e.store,n=e.redirect,r=[],s=[];t.beforeEach((function(e,t,i){var o=a.state.user.isLoggedIn;if(o)for(var c=0,u=s.length;c<u;c+=1)s[c]===e.name&&n(t.path||"/");if(!o)for(var l=0,m=r.length;l<m;l+=1)r[l]===e.name&&n("/");i()}))},je=a("59ca"),Re=a.n(je),Ae=(a("ea7b"),a("66ce"),a("588e"),a("2398")),He={apiKey:"AIzaSyB31V6WewUi-iY12231Ixahquf68uGaoCo",authDomain:"sport19y0715.firebaseapp.com",databaseURL:"https://sport19y0715.firebaseio.com",projectId:"sport19y0715",storageBucket:"sport19y0715.appspot.com",messagingSenderId:"179049951227",appId:"1:179049951227:web:15b2ae874d653216"};Te=Re.a.apps.length?Re.a.app():Re.a.initializeApp(He),Re.a.auth().languageCode="zh-TW";var Ue=Te.database(),Le=new Ae["a"].AuthUI(Re.a.auth()),Se=Re.a.storage(),_e=function(e){e.app,e.router;var t=e.Vue;t.prototype.$firebase=Re.a,t.prototype.$database=Ue,t.prototype.$ui=Le,t.prototype.$storage=Se};a("551c"),w.options;function Ce(e,t){var a=e?e.matched?e:t.resolve(e).route:t.currentRoute;return a?[].concat.apply([],a.matched.map((function(e){return Object.keys(e.components).map((function(t){var a=e.components[t];return{path:e.path,c:a.options||a}}))}))):[]}function $e(e,t){e.beforeResolve((function(a,n,r){var s=Ce(a,e),i=Ce(n,e),o=!1,c=s.filter((function(e,t){return o||(o=!i[t]||i[t].c!==e.c||e.path.indexOf("/:")>-1)})).filter((function(e){return e.c&&"function"===typeof e.c.preFetch})).map((function(e){return e.c}));if(!c.length)return r();var u=!0,l=function(e){u=!1,r(e)},m=function(){u&&r()};c.filter((function(e){return e&&e.preFetch})).reduce((function(e,r){return e.then((function(){return u&&r.preFetch({store:t,currentRoute:a,previousRoute:n,redirect:l})}))}),Promise.resolve()).then(m).catch((function(e){console.error(e),m()}))}))}var Ee=Me(),Ve=Ee.app,Fe=Ee.store,ze=Ee.router;function Be(){var e,t,a,n,r,s;return l.a.async((function(i){while(1)switch(i.prev=i.next){case 0:e=!0,t=function(t){e=!1,window.location.href=t},a=window.location.href.replace(window.location.origin,""),n=[Ye,re,Pe,_e],r=0;case 5:if(!(!0===e&&r<n.length)){i.next=23;break}if("function"===typeof n[r]){i.next=8;break}return i.abrupt("continue",20);case 8:return i.prev=8,i.next=11,l.a.awrap(n[r]({app:Ve,router:ze,store:Fe,Vue:m["a"],ssrContext:null,redirect:t,urlPath:a}));case 11:i.next=20;break;case 13:if(i.prev=13,i.t0=i["catch"](8),!i.t0||!i.t0.url){i.next=18;break}return window.location.href=i.t0.url,i.abrupt("return");case 18:return console.error("[Quasar] boot error:",i.t0),i.abrupt("return");case 20:r++,i.next=5;break;case 23:if(!1!==e){i.next=25;break}return i.abrupt("return");case 25:window.__INITIAL_STATE__&&Fe.replaceState(window.__INITIAL_STATE__),s=new m["a"](Ve),ze.onReady((function(){$e(ze,Fe),s.$mount("#q-app")}));case 28:case"end":return i.stop()}}),null,null,[[8,13]])}Be()},"31cd":function(e,t,a){},a5c0:function(e,t,a){}},[[0,"runtime","vendor"]]]);