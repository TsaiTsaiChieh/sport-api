(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,a){e.exports=a("2f39")},"2f39":function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"someGetter",(function(){return T}));var r={};a.r(r),a.d(r,"setProfile",(function(){return O})),a.d(r,"login",(function(){return Y})),a.d(r,"logout",(function(){return P})),a.d(r,"setRankMap",(function(){return R}));var s={};a.r(s),a.d(s,"setProfile",(function(){return U})),a.d(s,"login",(function(){return _})),a.d(s,"logout",(function(){return C})),a.d(s,"getRanks",(function(){return E}));var i={};a.r(i),a.d(i,"someGetter",(function(){return F}));var o={};a.r(o),a.d(o,"fetchMessages",(function(){return W})),a.d(o,"addMessage",(function(){return X})),a.d(o,"checkNewMessage",(function(){return Z})),a.d(o,"clearMessages",(function(){return te})),a.d(o,"createReply",(function(){return ae})),a.d(o,"clearReply",(function(){return ne})),a.d(o,"setReplyIndex",(function(){return re})),a.d(o,"deleteMessage",(function(){return se})),a.d(o,"restoreDeleteMessage",(function(){return ie})),a.d(o,"errorRemoveMessage",(function(){return oe})),a.d(o,"setMessageId",(function(){return ce})),a.d(o,"setFirstMessageTime",(function(){return ue}));var c={};a.r(c),a.d(c,"fetchMessages",(function(){return pe})),a.d(c,"pushMessages",(function(){return fe})),a.d(c,"addMessage",(function(){return de})),a.d(c,"checkNewMessage",(function(){return ge})),a.d(c,"clearMessages",(function(){return he})),a.d(c,"createReply",(function(){return ve})),a.d(c,"clearReply",(function(){return be})),a.d(c,"setReplyIndex",(function(){return ye})),a.d(c,"deleteMessage",(function(){return Ie})),a.d(c,"setFirstMessageTime",(function(){return Me}));var u={};a.r(u),a.d(u,"someGetter",(function(){return xe}));var l={};a.r(l),a.d(l,"setSportMap",(function(){return Ne}));var m={};a.r(m),a.d(m,"getSportList",(function(){return De}));var p=a("967e"),f=a.n(p),d=(a("a481"),a("96cf"),a("05bc"),a("7d6e"),a("e54f"),a("4439"),a("4605"),a("f580"),a("5b2b"),a("2967"),a("7e67"),a("d770"),a("dd82"),a("922c"),a("c32e"),a("a151"),a("8bc7"),a("d67f"),a("880e"),a("1c10"),a("9482"),a("e797"),a("4848"),a("e9fd"),a("195c"),a("64e9"),a("33c5"),a("4f62"),a("0dbc"),a("4953"),a("81db"),a("2e52"),a("2248"),a("e592"),a("70ca"),a("2318"),a("24bd"),a("8f27"),a("3064"),a("c9a2"),a("8767"),a("4a8e"),a("b828"),a("3c1c"),a("21cb"),a("c00e"),a("e4a8"),a("e4d3"),a("f4d9"),a("b794"),a("af24"),a("7c9c"),a("7bb2"),a("64f7"),a("c382"),a("f5d1"),a("3cec"),a("c00ee"),a("d450"),a("ca07"),a("14e3"),a("1dba"),a("674a"),a("de26"),a("6721"),a("25e9"),a("fc83"),a("98e5"),a("605a"),a("ba60"),a("df07"),a("7903"),a("e046"),a("58af"),a("7713"),a("0571"),a("3e27"),a("6837"),a("3fc9"),a("0693"),a("bf41"),a("985d"),a("31cd"),a("2b0e")),g=a("b05d"),h=a("436b"),v=a("515f");d["a"].use(g["a"],{config:{},plugins:{Dialog:h["a"],Cookies:v["a"]}});var b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"q-app"}},[a("router-view")],1)},y=[],I={name:"App"},M=I,w=a("2877"),k=Object(w["a"])(M,b,y,!1,null,null,null),x=k.exports,N=a("2f62"),D={isLoggedIn:!1,profile:{uid:null,role:null,name:null,nickname:null,phoneNumber:null,mail:null,birthday:null,inviteCode:null,code:null,signature:null,killerLevel:null,killerType:null,avatar:null,point:null,defaultTitle:null,titles:null},rankMap:{}};function T(){}a("7f7f");function O(e,t){var a=t.uid,n=t.email,r=t.name,s=t.phoneNumber,i=t.displayName,o=t.photoURL,c=t.birthday,u=t.signature,l=t.point,m=t.referrer,p=t.defaultTitle,f=t.titles,d=t.status,g="";0===d&&(g="user"),1===d&&(g="user"),9===d&&(g="admin"),2===d&&(g="killer"),e.isLoggedIn=!0,e.profile={uid:a,role:g,name:r,nickname:i,phoneNumber:s,mail:n,birthday:c,inviteCode:m,code:a,signature:u,killerLevel:p&&p.rank,killerType:p&&p.league,avatar:o,point:l,defaultTitle:p,titles:f}}function Y(e){e.isLoggedIn=!0}function P(e){e.isLoggedIn=!1,e.profile={uid:null,role:"user",name:null,nickname:null,phoneNumber:null,mail:null,birthday:null,inviteCode:null,code:null,signature:"",killerLevel:null,killerType:null,avatar:null,point:null,defaultTitle:null,titles:null}}function R(e,t){var a=t.rankMap;e.rankMap=a}var j=a("bc3a"),S=a.n(j),L="https://chat-api.doinfo.cc/",A=S.a.create({baseURL:L,withCredentials:!0});d["a"].prototype.$axios=S.a,d["a"].prototype.$axiosInstance=A;var H=function(e){var t=e.app;t.axios=S.a,t.axiosInstance=A};function U(e,t){e.commit("setProfile",t)}function _(e){e.commit("login")}function C(e){e.commit("logout")}function E(e){var t,a;return f.a.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a.awrap(A.get("/user/getRanks"));case 3:t=n.sent,a=t.data,e.commit("setRankMap",{rankMap:a}),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log("error: Get Rank List");case 11:case"end":return n.stop()}}),null,null,[[0,8]])}var V={namespaced:!0,getters:n,mutations:r,actions:s,state:D},$={initReply:{index:null,messageId:"",avatar:"",name:"",text:"",imgUrl:"",videoUrl:""},public:{messages:[],messageSize:50,firstMessageTime:null,reply:{index:null,messageId:"",avatar:"",name:"",text:"",imgUrl:"",videoUrl:""}}};function F(){}a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d");var G=a("c47a"),B=a.n(G),q=a("4db1"),z=a.n(q),J=a("bd4c");function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(a,!0).forEach((function(t){B()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function W(e,t){var a=t.chatName,n=t.messages,r=z()(e[a].messages),s=ee({messages:n});0!==r.length&&J["b"].formatDate(r[1].timestamp,"YYYY-MM-DD")===J["b"].formatDate(s[s.length-1].timestamp,"YYYY-MM-DD")&&r.splice(0,1),e[a].messages=[].concat(z()(s),z()(r))}function X(e,t){var a=t.chatName,n=t.message,r=e[a].messages;if(0!==r.length){var s=r[r.length-1].timestamp;J["b"].formatDate(s,"YYYY-MM-DD")!==J["b"].formatDate(n.timestamp,"YYYY-MM-DD")&&e[a].messages.push({isTime:!0,timestamp:n.timestamp})}e[a].messages.push(n)}function Z(e,t){for(var a=t.chatName,n=t.newMessage,r=e[a].messages,s=!1,i=r.length-1;i>=0;i-=1){if(r[i].tempHash===n.tempHash&&!r[i].messageId)return void(e[a].messages[i].messageId=n.messageId);if(r[i].messageId===n.messageId){s=!0;break}}s||(J["b"].formatDate(r[r.length-1].timestamp,"YYYY-MM-DD")!==J["b"].formatDate(n.timestamp,"YYYY-MM-DD")&&e[a].messages.push({isTime:!0,timestamp:n.timestamp}),e[a].messages.push(n))}function ee(e){for(var t=e.messages,a=[],n=0,r=t.length;n<r;n+=1){var s=t[n];0===n?a.push({isTime:!0,timestamp:s.timestamp}):J["b"].formatDate(s.timestamp,"YYYY-MM-DD")!==J["b"].formatDate(t[n-1].timestamp,"YYYY-MM-DD")&&a.push({isTime:!0,timestamp:s.timestamp}),a.push(s)}return a}function te(e,t){var a=t.chatName;e[a].messages=[]}function ae(e,t){var a=t.chatName,n=t.reply;for(var r in n)n.hasOwnProperty(r)&&(e[a].reply[r]=n[r])}function ne(e,t){var a=t.chatName;e[a].reply=Q({},e.initReply)}function re(e,t){var a=t.chatName,n=t.index;e[a].reply.index=n}function se(e,t){for(var a=t.chatName,n=t.messageId,r=t.deleteAction,s=e[a].messages,i=0,o=s.length;i<o;i+=1)if(s[i].messageId===n){s[i].deleteAction=r,e[a].messages=z()(s);break}}function ie(e,t){var a=t.chatName,n=t.messageId;t.deleteAction;alert("操作失敗");for(var r=e[a].messages,s=0,i=r.length;s<i;s+=1)if(r[s].messageId===n){delete r[s].deleteAction,e[a].messages=z()(r);break}}function oe(e,t){for(var a=t.chatName,n=t.tempHash,r=e[a].messages,s=r.length-1;s>=0;s-=1)if(r[s].tempHash===n){e[a].messages.splice(s,1);break}}function ce(e,t){for(var a=t.chatName,n=t.tempHash,r=t.messageId,s=e[a].messages,i=s.length-1;i>=0;i-=1)if(s[i].tempHash===n){e[a].messages[i].messageId=r;break}}function ue(e,t){var a=t.chatName,n=t.firstMessageTime;e[a].firstMessageTime=n}function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach((function(t){B()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe(e,t){var a=t.chatName;A.get("/messages_tsai",{params:{limit:50,offset:0,channelId:"public"}}).then((function(t){var n=t.data,r=n.map((function(t){var a=t.message,n=a.messageId,r=a.message,s=a.createTime,i=t.user,o=i.uid,c=i.displayName,u=i.avatar,l={index:null,messageId:"a",avatar:"/statics/app-logo-128x128.png",name:"田轎仔炫雅 a",text:"我是來自台中的教主甜心～",imgUrl:"",videoUrl:""};return{messageId:n,isSent:o===e.rootState.user.uid,name:c,role:"user",killerLevel:1,killerType:"NBA",avatar:u,signature:"我是家有一甲地的田轎子",point:2500,text:r,timestamp:new Date(1e3*s.seconds),reply:l}}));e.commit("fetchMessages",{chatName:a,messages:r})}))}function fe(e,t){var a=t.chatName,n=t.messages,r=n.map((function(t){var a=t.createTime,n=t.message,r=t.reply,s=void 0===r?null:r,i=t.user,o="";1===i.status&&(o="user"),9===i.status&&(o="admin"),2===i.status&&(o="killer"),i.status||(o="user");var c=null;s&&(c={messageId:s.messageId,avatar:s.user.avatar,name:s.user.displayName,text:"text"===s.type?s.message:"",imgUrl:/^image/.test(s.type)?s.message:"",videoUrl:/^video/.test(s.type)?s.message:""});var u=[];if(i.titles)for(var l=0,m=i.titles.length;l<m;l+=1)u.push({level:i.titles[l].rank,type:i.titles[l].league});return{uid:i.uid,messageId:n.messageId,isSent:i.uid===e.rootState.user.uid,isImg:/^image/.test(n.type),isVideo:/^video/.test(n.type),file:/^image/.test(n.type)||/^video/.test(n.type)?n.message:"",name:i.displayName,role:o,killerLevel:i.defaultTitle?i.defaultTitle.rank:void 0,killerType:i.defaultTitle?i.defaultTitle.league:void 0,avatar:i.avatar,signature:i.signature,point:i.point,text:n.message,timestamp:1e3*a._seconds,reply:c,levels:u}}));e.commit("fetchMessages",{chatName:a,messages:r})}function de(e,t){var a=t.chatName,n=t.message,r=e.state[a].reply.messageId,s=me({},n);s.reply=r?me({},e.state[a].reply):null,e.commit("addMessage",{chatName:a,message:s});var i={};n.isImg?i={message:{channelId:a,message:n.imgUrl,type:n.fileType,tempHash:n.tempHash}}:n.isVideo?i={message:{channelId:a,message:n.videoUrl,type:n.fileType,tempHash:n.tempHash}}:(i={message:{channelId:a,message:n.text,type:"text",tempHash:n.tempHash}},r&&(i.reply={messageId:e.state[a].reply.messageId})),A.post("/messages",i).then((function(t){var n=t.data.message;e.commit("setMessageId",{chatName:a,tempHash:s.tempHash,messageId:n.messageId})})).catch((function(){alert("傳送訊息失敗"),e.commit("errorRemoveMessage",{chatName:a,tempHash:s.tempHash})}))}function ge(e,t){var a=t.chatName,n=t.newMessage,r=n.createTime,s=n.message,i=n.reply,o=void 0===i?null:i,c=n.user,u="";1===c.status&&(u="user"),9===c.status&&(u="admin"),2===c.status&&(u="killer"),c.status||(u="user");var l=null;o&&(l={messageId:o.messageId,avatar:o.user.avatar,name:o.user.displayName,text:"text"===o.type?o.message:"",imgUrl:/^image/.test(o.type)?o.message:"",videoUrl:/^video/.test(o.type)?o.message:""});var m={tempHash:s.tempHash,messageId:s.messageId,isSent:c.uid===e.rootState.user.uid,isImg:/^image/.test(s.type),isVideo:/^video/.test(s.type),file:/^image/.test(s.type)||/^video/.test(s.type)?s.message:"",name:c.displayName,role:u,killerLevel:c.defaultTitle.rank,killerType:c.defaultTitle.league,avatar:c.avatar,signature:c.signature,point:c.point,text:s.message,timestamp:1e3*r._seconds,reply:l};e.commit("checkNewMessage",{chatName:a,newMessage:m})}function he(e,t){var a=t.chatName;e.commit("clearMessages",{chatName:a})}function ve(e,t){var a=t.chatName,n=t.reply;e.commit("createReply",{chatName:a,reply:n})}function be(e,t){var a=t.chatName;e.commit("clearReply",{chatName:a})}function ye(e,t){var a=t.chatName,n=t.index;e.commit("setReplyIndex",{chatName:a,index:n})}function Ie(e,t){var a=t.chatName,n=t.messageId,r=t.deleteAction;n&&(e.commit("deleteMessage",{chatName:a,messageId:n,deleteAction:r}),A.delete("/messages/".concat(n),{data:{deleteAction:r,channelId:a}}).then((function(e){var t=e.data;console.log(t)})).catch((function(){e.commit("restoreDeleteMessage",{chatName:a,messageId:n,deleteAction:r})})))}function Me(e,t){e.commit("setFirstMessageTime",t)}var we={namespaced:!0,getters:i,mutations:o,actions:c,state:$},ke={sportMap:{}};function xe(){}function Ne(e,t){var a=t.sportMap;e.sportMap=a}function De(e){var t,a;return f.a.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a.awrap(A.get("/sport"));case 3:t=n.sent,a=t.data,e.commit("setSportMap",{sportMap:a}),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log("error: Get Sport List");case 11:case"end":return n.stop()}}),null,null,[[0,8]])}var Te={namespaced:!0,getters:u,mutations:l,actions:m,state:ke};d["a"].use(N["a"]);var Oe=function(){var e=new N["a"].Store({modules:{user:V,chat:we,sport:Te},strict:!1});return e},Ye=a("8c4f"),Pe=[{path:"/",component:function(){return Promise.all([a.e("4308c3de"),a.e("fd98b934")]).then(a.bind(null,"f241"))},children:[{name:"home",path:"",component:function(){return Promise.all([a.e("4308c3de"),a.e("7a6a5de1")]).then(a.bind(null,"8b24"))}},{name:"profile",path:"profile",component:function(){return Promise.all([a.e("4308c3de"),a.e("2ffbcb5d")]).then(a.bind(null,"2ff9"))}},{name:"teach",path:"teach",component:function(){return Promise.all([a.e("4308c3de"),a.e("66d60dfc")]).then(a.bind(null,"d440"))}},{name:"rule",path:"rule",component:function(){return Promise.all([a.e("4308c3de"),a.e("eb446818")]).then(a.bind(null,"3f97"))}}]}];var Re=Pe;d["a"].use(Ye["a"]);var je=function(){var e=new Ye["a"]({scrollBehavior:function(){return{x:0,y:0}},routes:Re,mode:"history",base:"/"});return e},Se=function(e){var t="function"===typeof Oe?Oe({Vue:d["a"],ssrContext:e}):Oe,a="function"===typeof je?je({Vue:d["a"],ssrContext:e,store:t}):je;t.$router=a;var n={router:a,store:t,render:function(e){return e(x)}};return g["a"].ssrUpdate({app:n,ssr:e}),{app:n,store:t,router:a}},Le=a("a925"),Ae={failed:"Action failed",success:"Action was successful"},He={"en-us":Ae};d["a"].use(Le["a"]);var Ue,_e=new Le["a"]({locale:"en-us",fallbackLocale:"en-us",messages:He}),Ce=function(e){var t=e.app;t.i18n=_e},Ee=function(e){var t=e.router,a=e.store,n=e.redirect,r=["profile","rule","teach"],s=[];t.beforeEach((function(e,t,i){var o=a.state.user.isLoggedIn;if(o)for(var c=0,u=s.length;c<u;c+=1)s[c]===e.name&&n(t.path||"/");if(!o)for(var l=0,m=r.length;l<m;l+=1)r[l]===e.name&&n("/");i()}))},Ve=a("59ca"),$e=a.n(Ve),Fe=(a("ea7b"),a("66ce"),a("588e"),{apiKey:"AIzaSyB31V6WewUi-iY12231Ixahquf68uGaoCo",authDomain:"sport19y0715.firebaseapp.com",databaseURL:"https://sport19y0715.firebaseio.com",projectId:"sport19y0715",storageBucket:"sport19y0715.appspot.com",messagingSenderId:"179049951227",appId:"1:179049951227:web:15b2ae874d653216"});Ue=$e.a.apps.length?$e.a.app():$e.a.initializeApp(Fe);var Ge=Ue.database(),Be=$e.a.storage(),qe=function(e){e.app,e.router;var t=e.Vue;t.prototype.$firebase=$e.a,t.prototype.$database=Ge,t.prototype.$storage=Be};a("551c"),x.options;function ze(e,t){var a=e?e.matched?e:t.resolve(e).route:t.currentRoute;return a?[].concat.apply([],a.matched.map((function(e){return Object.keys(e.components).map((function(t){var a=e.components[t];return{path:e.path,c:a.options||a}}))}))):[]}function Je(e,t){e.beforeResolve((function(a,n,r){var s=ze(a,e),i=ze(n,e),o=!1,c=s.filter((function(e,t){return o||(o=!i[t]||i[t].c!==e.c||e.path.indexOf("/:")>-1)})).filter((function(e){return e.c&&"function"===typeof e.c.preFetch})).map((function(e){return e.c}));if(!c.length)return r();var u=!0,l=function(e){u=!1,r(e)},m=function(){u&&r()};c.filter((function(e){return e&&e.preFetch})).reduce((function(e,r){return e.then((function(){return u&&r.preFetch({store:t,currentRoute:a,previousRoute:n,redirect:l})}))}),Promise.resolve()).then(m).catch((function(e){console.error(e),m()}))}))}var Ke=Se(),Qe=Ke.app,We=Ke.store,Xe=Ke.router;function Ze(){var e,t,a,n,r,s;return f.a.async((function(i){while(1)switch(i.prev=i.next){case 0:e=!0,t=function(t){e=!1,window.location.href=t},a=window.location.href.replace(window.location.origin,""),n=[Ce,H,Ee,qe],r=0;case 5:if(!(!0===e&&r<n.length)){i.next=23;break}if("function"===typeof n[r]){i.next=8;break}return i.abrupt("continue",20);case 8:return i.prev=8,i.next=11,f.a.awrap(n[r]({app:Qe,router:Xe,store:We,Vue:d["a"],ssrContext:null,redirect:t,urlPath:a}));case 11:i.next=20;break;case 13:if(i.prev=13,i.t0=i["catch"](8),!i.t0||!i.t0.url){i.next=18;break}return window.location.href=i.t0.url,i.abrupt("return");case 18:return console.error("[Quasar] boot error:",i.t0),i.abrupt("return");case 20:r++,i.next=5;break;case 23:if(!1!==e){i.next=25;break}return i.abrupt("return");case 25:window.__INITIAL_STATE__&&We.replaceState(window.__INITIAL_STATE__),s=new d["a"](Qe),Xe.onReady((function(){Je(Xe,We),s.$mount("#q-app")}));case 28:case"end":return i.stop()}}),null,null,[[8,13]])}Ze()},"31cd":function(e,t,a){}},[[0,"runtime","vendor"]]]);